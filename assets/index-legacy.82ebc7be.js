!function(){var e=document.createElement("style");e.innerHTML='code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function,.token.class-name{color:#dd4a68}.token.regex,.token.important,.token.variable{color:#e90}.token.important,.token.bold{font-weight:bold}.token.italic{font-style:italic}.token.entity{cursor:help}\n',document.head.appendChild(e),System.register(["./vendor-legacy.ecbe1fbf.js"],(function(){"use strict";var e,t,n,o,a,s,l,r,i,c,u,d,p,g,m,v,k,b,f,h,y,S,w,U,z,x;return{setters:[function(j){e=j.d,t=j.r,n=j.o,o=j.w,a=j.c,s=j.a,l=j.t,r=j.b,i=j.n,c=j.P,u=j.e,d=j.u,p=j.f,g=j.g,m=j.h,v=j.i,k=j.F,b=j.j,f=j.k,h=j.l,y=j.L,S=j.m,w=j.p,U=j.q,z=j.s,x=j.v}],execute:function(){var j=e({props:{source:{type:String,default:""}},setup(e){const u=e,d=t(null);return n((()=>{o((()=>(i((()=>{c.highlightElement(d.value)})),u.source)))})),(e,t)=>(r(),a("pre",null,[s("code",{ref:(e,t)=>{t.code=e,d.value=e},class:"language-javascript"},l(u.source),513)]))}});function N(e,t){const n={};for(const o in e)n[o]=u({get:()=>e[o],set(e){t(`update:${o}`,e)}});return n}const O=["data-gutter"];var B=e({props:{inside:{type:String,default:"inside",required:!0},source:{type:String,default:""},title:{type:String,default:""},preamble:{type:String,default:""},version:{type:String,default:"16.6.0"}},emits:["update:inside","update:source","update:title","update:preamble","update:version","update:loading"],setup(e,{emit:l}){const i=e,{inside:c,source:p,title:g,preamble:m,version:v}=N(i,l),k=t(null),b=u({get:()=>v.value.trim().split(".").map(((e,t)=>0===t?e:"x")).join("."),set(e){v.value=e}});return l("update:loading",!0),n((async()=>{const e=window.RunKit.createNotebook({element:k.value,preamble:m.value,title:g.value,gutterStyle:c.value,source:p.value,nodeVersion:b.value});e.onLoad=async t=>{l("update:loading",!1),e.evaluate()},e.onSave=async()=>{e.getSource().then((e=>p.value=e)),e.getNodeVersion().then((e=>b.value=e))},o((()=>e.setSource(p.value))),o((()=>e.setTitle(g.value))),o((()=>e.setPreamble(m.value))),o((()=>e.setNodeVersion(b.value)))})),(e,t)=>(r(),a("pre",{class:"embed","data-gutter":d(c)},[s("div",{ref:(e,t)=>{t.element=e,k.value=e}},null,512)],8,O))}}),E=e({props:{inside:{type:String,default:"inside",required:!0},source:{type:String,default:""},title:{type:String,default:""},preamble:{type:String,default:""},version:{type:String,default:"16.6.0"}},emits:["update:inside","update:source","update:title","update:preamble","update:version"],setup(e,{emit:n}){const o=e,{inside:s,source:l,title:i,preamble:c,version:u}=N(o,n),b=t(!0);return(e,t)=>(r(),a(k,null,[b.value?(r(),p(j,{key:0,source:d(l)},null,8,["source"])):g("",!0),m(B,{source:d(l),"onUpdate:source":t[0]||(t[0]=e=>v(l)?l.value=e:null),inside:d(s),"onUpdate:inside":t[1]||(t[1]=e=>v(s)?s.value=e:null),title:d(i),"onUpdate:title":t[2]||(t[2]=e=>v(i)?i.value=e:null),preamble:d(c),"onUpdate:preamble":t[3]||(t[3]=e=>v(c)?c.value=e:null),version:d(u),"onUpdate:version":t[4]||(t[4]=e=>v(u)?u.value=e:null),"onUpdate:loading":t[5]||(t[5]=e=>b.value=e)},null,8,["source","inside","title","preamble","version"])],64))}});const J=x(e({setup(e){z.apiCache=!0;const t=b({source:"",inside:"inside",title:"",preamble:"",version:"16.6.0"});return f((async()=>{const e=h(),[n,a]=function(e=document.location.toString(),t){const n=new URL(e),o=n.searchParams,a=b(t);o.forEach(((e,t)=>{try{a[t]=atob(e)}catch(n){a[t]=e}}));const s=u((()=>(Object.keys(a).forEach((e=>{const t=btoa(a[e]||"");o.set(e,t)})),n.href)));return[a,s]}(void 0,{code:"{}"});o((()=>history.replaceState("","",a.value))),Object.assign(t,JSON.parse(y.decompressFromBase64(n.code)||"{}")),o((()=>{n.code=y.compressToBase64(JSON.stringify(t))})),e?(S.getBlockAttr(e,"custom-config").then((e=>{if(e){const n=w(e.value);n?Object.assign(t,JSON.parse(n)):console.error("decode 失败, code:",e.value)}})).catch((e=>{console.error("查询config失败",e)})),U()===U.env.siYuan&&o((()=>{S.setBlockAttrs({id:h(),attrs:{"custom-config":JSON.stringify(t)}}).then((e=>{}))}))):console.error("获取当前挂件快id失败，不再尝试调用思源 api 保存代码")})),(e,n)=>(r(),p(E,{source:d(t).source,"onUpdate:source":n[0]||(n[0]=e=>d(t).source=e),inside:d(t).inside,"onUpdate:inside":n[1]||(n[1]=e=>d(t).inside=e),title:d(t).title,"onUpdate:title":n[2]||(n[2]=e=>d(t).title=e),preamble:d(t).preamble,"onUpdate:preamble":n[3]||(n[3]=e=>d(t).preamble=e),version:d(t).version,"onUpdate:version":n[4]||(n[4]=e=>d(t).version=e)},null,8,["source","inside","title","preamble","version"]))}}));J.mount("#app"),J.config}}}))}();
//# sourceMappingURL=index-legacy.82ebc7be.js.map
